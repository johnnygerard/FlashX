<app-logo></app-logo>
<h2>Welcome {{username}}!</h2>
<form class="form" (ngSubmit)="modifyPwd(form)" #form="ngForm">
  <label [class.required]="submitted && currentPwd.errors?.['required']"
      for="currentPwd">Current</label>
  <app-password (toggleEvent)="pwd1.type = $event ? 'password' : 'text'">
    <input id="currentPwd" name="currentPwd" type="password"
        autocomplete="current-password" required #pwd1 appAutofocus
        [(ngModel)]="credentials.currentPwd" #currentPwd="ngModel">
  </app-password>
  <label [class.required]="submitted && newPwd.errors?.['required']"
      for="newPwd">New</label>
  <app-password (toggleEvent)="pwd2.type = $event ? 'password' : 'text'">
    <input id="newPwd" name="newPwd" type="password" autocomplete="new-password"
        pattern="[!-~]*" appPasswordValidator minlength="11" maxlength="128"
        required [(ngModel)]="credentials.newPwd" #newPwd="ngModel" #pwd2>
  </app-password>
  <div class="validation">
    <p *ngIf="newPwd.errors?.['minlength']">
      <strong>Min length: 11</strong>
    </p>
    <p *ngIf="newPwd.errors?.['pattern']">
      <strong>No spaces, non-ascii or control characters</strong>
    </p>
    <p *ngIf="newPwd.errors?.['digit']">
      <strong>One digit</strong>
    </p>
    <p *ngIf="newPwd.errors?.['lowercase']">
      <strong>One small letter</strong>
    </p>
    <p *ngIf="newPwd.errors?.['uppercase']">
      <strong>One capital letter</strong>
    </p>
    <p *ngIf="newPwd.errors?.['symbol']">
      <strong>One symbol</strong>
    </p>
  </div>
  <button id="updatePwd">Change password</button>
  <p class="message" *ngIf="message"><strong>{{message}}</strong></p>
  <p class="successMessage" *ngIf="successMessage">
    <strong>{{successMessage}}</strong>
  </p>
</form>
<button id="deleteAccount" type="button" class="delete"
    (click)="deleteAccount()">Delete account</button>
